import{J as Ne,K as G,L as R,d as ee,r as b,k as me,a6 as ge,M as O,y as S,a7 as te,C as e,B as t,X as Q,D as a,a1 as V,A as d,a8 as B,Y as re,W as J,z as o,a9 as le,P as N,aa as j,ab as Se,ac as Ce,ad as q,ae as fe,af as ae,ag as H,a4 as Oe,ah as pe,ai as se,aj as K,a5 as x,T as W,ak as w,o as ke,Z as he,_ as xe,N as $,V as ue,O as Y,al as Ee,S as Ie,am as Ue,an as ve,ao as Te,x as Z,Q as Fe,R as Pe}from"./-SV6uRVe.js";import{_ as oe}from"./DlAUqK2U.js";const ie=Ne("orders",{state:()=>({orders:[],pagination:null,loading:!1,error:null,availableDrivers:[],loadingDrivers:!1,driverError:null,assigningDriver:!1,lastAssignedOrder:null}),getters:{hasOrders(v){return v.orders.length>0},isLoading(v){return v.loading},hasError(v){return!!v.error},getPagination(v){return v.pagination},getAvailableDrivers(v){return v.availableDrivers},unassignedOrders(v){return v.orders.filter(n=>!n.driver&&(n.status==="pending"||n.status==="confirmed"))},assignedOrders(v){return v.orders.filter(n=>n.driver)},ordersByStatus:v=>n=>v.orders.filter(m=>m.status===n),availableDriversCount(v){return v.availableDrivers.filter(n=>n.isActive).length},driverById:v=>n=>v.availableDrivers.find(m=>m.id===n)},actions:{async fetchOrders(v){this.loading=!0,this.error=null;const n=G(),m=R();if(!m.token){this.error="Authentication token not found. Please login.",this.loading=!1;return}try{const p=await n.getAllOrders(m.token,v);this.orders=p.data,this.pagination=p.pagination}catch(p){this.error=p.message||"Failed to fetch orders",this.orders=[],this.pagination=null}finally{this.loading=!1}},async changeOrdersPage(v){this.pagination&&await this.fetchOrders({page:v,limit:this.pagination.limit})},async fetchAvailableDrivers(){this.loadingDrivers=!0,this.driverError=null;const v=G(),n=R();if(!n.token){this.driverError="Authentication token not found. Please login.",this.loadingDrivers=!1;return}try{const m=await v.getAllDrivers(n.token,{isActive:!0});this.availableDrivers=m.map(p=>({...p,displayName:`${p.firstName} ${p.lastName}`}))}catch(m){this.driverError=m.message||"Failed to load available drivers"}finally{this.loadingDrivers=!1}},async assignDriverToOrder(v,n,m){this.assigningDriver=!0,this.driverError=null;const p=G(),c=R();if(!c.token)throw this.driverError="Authentication token not found. Please login.",this.assigningDriver=!1,new Error("Authentication token not found.");try{const D=(await p.assignDriverToOrder(v,n,c.token,m)).order;this.lastAssignedOrder=D;const A=this.orders.findIndex(C=>C.id===D.id);return A!==-1&&(this.orders[A]=D),D}catch(u){throw this.driverError=u.message||"Failed to assign driver",u}finally{this.assigningDriver=!1}},async updateOrderStatus(v,n){this.loading=!0,this.error=null;const m=G(),p=R();if(!p.token)throw this.error="Authentication token not found. Please login.",this.loading=!1,new Error("Authentication token not found.");try{const c=await m.updateOrder(v,{status:n},p.token),u=this.orders.findIndex(D=>D.id===c.id);return u!==-1&&(this.orders[u]=c),c}catch(c){throw this.error=c.message||"Failed to update order status",c}finally{this.loading=!1}},async deleteOrder(v){this.loading=!0,this.error=null;const n=G(),m=R();if(!m.token)throw this.error="Authentication token not found. Please login.",this.loading=!1,new Error("Authentication token not found.");try{await n.deleteOrder(v,m.token),this.orders=this.orders.filter(p=>p.id!==v)}catch(p){throw this.error=p.message||"Failed to delete order",p}finally{this.loading=!1}}}}),$e={class:"d-flex align-center"},Le={class:"mt-1"},ze={class:"text-caption"},Ge={class:"text-center pa-4"},Re=ee({__name:"DriverAssignDialog",props:{modelValue:{type:Boolean},order:{}},emits:["update:modelValue","driver-assigned"],setup(v,{emit:n}){const m=v,p=n,c=ie(),u=b(null),D=b(""),A=b(""),C=me({get:()=>m.modelValue,set:g=>p("update:modelValue",g)});ge(()=>m.modelValue,g=>{g&&(c.fetchAvailableDrivers(),k())});const I=async()=>{if(!(!u.value||!m.order))try{const g=await c.assignDriverToOrder(m.order.id,u.value,{estimatedDeliveryTime:D.value||void 0,specialInstructions:A.value||void 0});p("driver-assigned",g),L()}catch(g){console.error("Error assigning driver:",g)}},L=()=>{C.value=!1},k=()=>{u.value=null,D.value="",A.value=""},U=g=>{const l=typeof g=="string"?parseFloat(g):g;return new Intl.NumberFormat("en-UG",{minimumFractionDigits:0,maximumFractionDigits:0}).format(l)},z=g=>g.isActive?"success":"error";return(g,l)=>(S(),O(te,{modelValue:C.value,"onUpdate:modelValue":l[3]||(l[3]=s=>C.value=s),"max-width":"600px",persistent:""},{default:e(()=>[t(W,null,{default:e(()=>[t(Q,{class:"text-h5"},{default:e(()=>{var s;return[t(V,{left:""},{default:e(()=>l[4]||(l[4]=[a("mdi-account-plus")])),_:1,__:[4]}),a(" Assign Driver to Order #"+d((s=g.order)==null?void 0:s.orderNumber),1)]}),_:1}),t(B),t(re,{class:"pt-4"},{default:e(()=>[t(J,{type:"info",class:"mb-4",variant:"tonal"},{default:e(()=>{var s,y,h,T,F,P;return[o("div",$e,[o("div",null,[l[5]||(l[5]=o("strong",null,"Customer:",-1)),a(" "+d((y=(s=g.order)==null?void 0:s.customer)==null?void 0:y.firstName)+" "+d((T=(h=g.order)==null?void 0:h.customer)==null?void 0:T.lastName),1),l[6]||(l[6]=o("br",null,null,-1)),l[7]||(l[7]=o("strong",null,"Delivery Address:",-1)),a(" "+d((F=g.order)==null?void 0:F.deliveryAddress),1),l[8]||(l[8]=o("br",null,null,-1)),l[9]||(l[9]=o("strong",null,"Total Amount:",-1)),a(" UGX "+d(U(((P=g.order)==null?void 0:P.totalAmount)??0)),1)])])]}),_:1}),t(le,{modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=s=>u.value=s),items:N(c).availableDrivers,"item-title":"displayName","item-value":"id",label:"Select Available Driver",loading:N(c).loadingDrivers,"error-messages":N(c).driverError,required:"",clearable:"",hint:"Choose a driver to assign this order to","persistent-hint":""},{item:e(({props:s,item:y})=>[t(j,Se(Ce(s)),{prepend:e(()=>[t(H,{size:"40",color:z(y.raw)},{default:e(()=>[t(V,{color:"white"},{default:e(()=>l[10]||(l[10]=[a("mdi-account")])),_:1,__:[10]})]),_:2},1032,["color"])]),default:e(()=>[t(q,null,{default:e(()=>[a(d(y.raw.firstName)+" "+d(y.raw.lastName),1)]),_:2},1024),t(fe,null,{default:e(()=>{var h;return[o("div",null,[t(V,{size:"small",class:"mr-1"},{default:e(()=>l[11]||(l[11]=[a("mdi-phone")])),_:1,__:[11]}),a(" "+d(y.raw.phone),1)]),o("div",Le,[t(ae,{color:z(y.raw),size:"x-small",class:"mr-2"},{default:e(()=>[a(d(y.raw.isActive?"Active":"Inactive"),1)]),_:2},1032,["color"]),o("span",ze," Active Orders: "+d(((h=y.raw.stats)==null?void 0:h.activeOrdersCount)||0),1)])]}),_:2},1024)]),_:2},1040)]),"no-data":e(()=>[o("div",Ge,[t(V,{size:"48",color:"grey"},{default:e(()=>l[12]||(l[12]=[a("mdi-account-off")])),_:1,__:[12]}),l[13]||(l[13]=o("div",{class:"text-body-2 mt-2"},"No available drivers found",-1))])]),_:1},8,["modelValue","items","loading","error-messages"]),t(Oe,{modelValue:D.value,"onUpdate:modelValue":l[1]||(l[1]=s=>D.value=s),label:"Estimated Delivery Time (Optional)",type:"datetime-local",hint:"Set an estimated delivery time for the customer","persistent-hint":"",class:"mt-4"},null,8,["modelValue"]),t(pe,{modelValue:A.value,"onUpdate:modelValue":l[2]||(l[2]=s=>A.value=s),label:"Assignment Notes (Optional)",placeholder:"Any special instructions for the driver...",rows:"3",class:"mt-4"},null,8,["modelValue"])]),_:1}),t(B),t(se,{class:"pa-4"},{default:e(()=>[t(K),t(x,{onClick:L,disabled:N(c).assigningDriver},{default:e(()=>l[14]||(l[14]=[a(" Cancel ")])),_:1,__:[14]},8,["disabled"]),t(x,{color:"primary",onClick:I,loading:N(c).assigningDriver,disabled:!u.value||N(c).loadingDrivers},{default:e(()=>[t(V,{left:""},{default:e(()=>l[15]||(l[15]=[a("mdi-check")])),_:1,__:[15]}),l[16]||(l[16]=a(" Assign Driver "))]),_:1,__:[16]},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Be=oe(Re,[["__scopeId","data-v-8769e502"]]),Me={class:"d-flex align-center"},Xe=ee({__name:"OrderStatusDialog",props:{modelValue:{type:Boolean},order:{}},emits:["update:modelValue","status-updated"],setup(v,{emit:n}){const m=v,p=n,c=ie(),u=b(null),D=b(""),A=b([]),C=me({get:()=>m.modelValue,set:l=>p("update:modelValue",l)}),I=[{title:"Confirmed",value:w.CONFIRMED},{title:"Assigned",value:w.ASSIGNED},{title:"In Transit",value:w.IN_TRANSIT},{title:"Delivered",value:w.DELIVERED},{title:"Cancelled",value:w.CANCELLED}];ge(()=>m.modelValue,l=>{l&&(U(),m.order&&(u.value=m.order.status))});const L=async()=>{if(!(!u.value||!m.order)){A.value=[];try{const l=await c.updateOrderStatus(m.order.id,u.value);p("status-updated",l),k()}catch(l){console.error("Error updating status:",l),A.value=[l.message||"Failed to update status"]}}},k=()=>{C.value=!1},U=()=>{u.value=null,D.value="",A.value=[]},z=l=>{const s={[w.PENDING]:"orange",[w.CONFIRMED]:"blue",[w.ASSIGNED]:"purple",[w.IN_TRANSIT]:"cyan",[w.DELIVERED]:"green",[w.CANCELLED]:"red"};return l&&s[l]||"grey"},g=l=>l?l.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" "):"N/A";return(l,s)=>(S(),O(te,{modelValue:C.value,"onUpdate:modelValue":s[2]||(s[2]=y=>C.value=y),"max-width":"600px",persistent:""},{default:e(()=>[t(W,null,{default:e(()=>[t(Q,{class:"text-h5"},{default:e(()=>{var y;return[t(V,{left:""},{default:e(()=>s[3]||(s[3]=[a("mdi-update")])),_:1,__:[3]}),a(" Update Order #"+d((y=l.order)==null?void 0:y.orderNumber)+" Status ",1)]}),_:1}),t(B),t(re,{class:"pt-4"},{default:e(()=>[t(J,{type:"info",class:"mb-4",variant:"tonal"},{default:e(()=>{var y,h,T,F,P,M;return[o("div",Me,[o("div",null,[s[4]||(s[4]=o("strong",null,"Current Status:",-1)),s[5]||(s[5]=a()),t(ae,{color:z((y=l.order)==null?void 0:y.status),size:"small"},{default:e(()=>{var X;return[a(d(g((X=l.order)==null?void 0:X.status)),1)]}),_:1},8,["color"]),s[6]||(s[6]=o("br",null,null,-1)),s[7]||(s[7]=o("strong",null,"Customer:",-1)),a(" "+d((T=(h=l.order)==null?void 0:h.customer)==null?void 0:T.firstName)+" "+d((P=(F=l.order)==null?void 0:F.customer)==null?void 0:P.lastName),1),s[8]||(s[8]=o("br",null,null,-1)),s[9]||(s[9]=o("strong",null,"Delivery Address:",-1)),a(" "+d((M=l.order)==null?void 0:M.deliveryAddress),1)])])]}),_:1}),t(le,{modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=y=>u.value=y),items:I,"item-title":"title","item-value":"value",label:"Select New Status","error-messages":A.value,required:"",clearable:"",hint:"Choose the new status for this order","persistent-hint":""},null,8,["modelValue","error-messages"]),t(pe,{modelValue:D.value,"onUpdate:modelValue":s[1]||(s[1]=y=>D.value=y),label:"Status Notes (Optional)",placeholder:"Any relevant notes for this status update...",rows:"3",class:"mt-4"},null,8,["modelValue"])]),_:1}),t(B),t(se,{class:"pa-4"},{default:e(()=>[t(K),t(x,{onClick:k,disabled:N(c).loading},{default:e(()=>s[10]||(s[10]=[a(" Cancel ")])),_:1,__:[10]},8,["disabled"]),t(x,{color:"primary",onClick:L,loading:N(c).loading,disabled:!u.value},{default:e(()=>[t(V,{left:""},{default:e(()=>s[11]||(s[11]=[a("mdi-check")])),_:1,__:[11]}),s[12]||(s[12]=a(" Update Status "))]),_:1,__:[12]},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),je=oe(Xe,[["__scopeId","data-v-a9a88702"]]),qe={class:"d-flex align-center"},Qe={class:"font-weight-medium"},Je={class:"text-caption text-grey"},Ke={class:"font-weight-medium"},We={key:0,class:"d-flex align-center"},Ye={class:"text-body-2 font-weight-medium"},Ze={class:"text-caption text-grey"},He={key:1,class:"text-caption text-grey"},et={class:"text-body-2"},tt={class:"text-caption text-grey"},rt={class:"d-flex gap-1"},lt={class:"text-center pa-8"},at={class:"text-body-2 text-grey"},st=ee({__name:"orders",setup(v){const n=ie();xe();const m=b(!1),p=b(!1),c=b(!1),u=b(null),D=b(""),A=b(null),C=b(null),I=b(null),L=b([{title:"Order #",key:"orderNumber",sortable:!0,width:"120px"},{title:"Customer",key:"customer",sortable:!1,width:"200px"},{title:"Driver",key:"driver",sortable:!1,width:"180px"},{title:"Date",key:"createdAt",sortable:!0,width:"150px"},{title:"Total (UGX)",key:"totalAmount",sortable:!0,width:"120px"},{title:"Status",key:"status",sortable:!0,width:"120px"},{title:"Actions",key:"actions",sortable:!1,align:"end",width:"300px"}]),k=b(1),U=b(10),z=[{title:"All Statuses",value:null},{title:"Pending",value:"pending"},{title:"Confirmed",value:"confirmed"},{title:"Assigned",value:"assigned"},{title:"In Transit",value:"in_transit"},{title:"Delivered",value:"delivered"},{title:"Cancelled",value:"cancelled"}],g=async()=>{const i={page:k.value,limit:U.value,...A.value&&{status:A.value}};await n.fetchOrders(i)},l=async i=>{k.value=i,await g()},s=async i=>{U.value=i,k.value=1,await g()},y=async()=>{k.value=1,await g()},h=i=>(i.status===w.PENDING||i.status===w.CONFIRMED)&&!i.driver,T=i=>{u.value=i,m.value=!0},F=async i=>{D.value=`Driver successfully assigned to Order #${i.orderNumber}`,await g()},P=i=>i.status!==w.DELIVERED&&i.status!==w.CANCELLED,M=i=>{u.value=i,p.value=!0},X=async i=>{D.value=`Order #${i.orderNumber} status updated to ${i.status}`,await g()},ce=async i=>{if(confirm(`Are you sure you want to cancel Order #${i.orderNumber}?`)){C.value=i.id;try{await n.updateOrderStatus(i.id,w.CANCELLED),D.value=`Order #${i.orderNumber} has been cancelled`,await g()}catch(r){console.error("Error cancelling order:",r),n.error=r.message||"Failed to cancel order"}finally{C.value=null}}},ye=async i=>{if(confirm(`Are you sure you want to permanently delete Order #${i.orderNumber}? This action cannot be undone.`)){I.value=i.id;try{await n.deleteOrder(i.id),D.value=`Order #${i.orderNumber} has been deleted`,await g()}catch(r){console.error("Error deleting order:",r),n.error=r.message||"Failed to delete order"}finally{I.value=null}}},De=i=>{u.value=i,c.value=!0},Ae=i=>{const r=typeof i=="string"?parseFloat(i):i;return new Intl.NumberFormat("en-UG",{minimumFractionDigits:0,maximumFractionDigits:0}).format(r)},be=i=>new Date(i).toLocaleDateString("en-UG",{year:"numeric",month:"short",day:"numeric"}),Ve=i=>new Date(i).toLocaleTimeString("en-UG",{hour:"2-digit",minute:"2-digit"}),_e=i=>({pending:"orange",confirmed:"blue",assigned:"purple",in_transit:"cyan",delivered:"green",cancelled:"red"})[i]||"grey",we=i=>i.split("_").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ");return ke(()=>{g()}),(i,r)=>(S(),O(he,null,{default:e(()=>[t(ue,null,{default:e(()=>[t(Y,null,{default:e(()=>r[6]||(r[6]=[o("h1",null,"Orders Management",-1)])),_:1,__:[6]})]),_:1}),N(n).error?(S(),O(J,{key:0,type:"error",dense:"",class:"mb-4"},{default:e(()=>[a(d(N(n).error),1)]),_:1})):$("",!0),D.value?(S(),O(J,{key:1,type:"success",dense:"",class:"mb-4",dismissible:"","onClick:close":r[0]||(r[0]=_=>D.value="")},{default:e(()=>[a(d(D.value),1)]),_:1})):$("",!0),t(W,null,{default:e(()=>{var _;return[t(Q,null,{default:e(()=>[r[9]||(r[9]=a(" All Orders ")),t(K),t(le,{modelValue:A.value,"onUpdate:modelValue":[r[1]||(r[1]=f=>A.value=f),y],items:z,label:"Filter by Status",clearable:"",variant:"outlined",density:"compact",style:{"max-width":"200px"},class:"mr-4"},null,8,["modelValue"]),t(x,{color:"primary",onClick:g,loading:N(n).loading},{default:e(()=>[t(V,{left:""},{default:e(()=>r[7]||(r[7]=[a("mdi-refresh")])),_:1,__:[7]}),r[8]||(r[8]=a(" Refresh "))]),_:1,__:[8]},8,["loading"])]),_:1,__:[9]}),t(Ee,{headers:L.value,items:N(n).orders||[],loading:N(n).loading,"item-value":"id",class:"elevation-1","server-items-length":((_=N(n).pagination)==null?void 0:_.total)||0,page:k.value,"items-per-page":U.value,"onUpdate:page":l,"onUpdate:itemsPerPage":s},{"item.customer":e(({item:f})=>{var E,ne,de;return[o("div",qe,[t(H,{size:"32",class:"mr-3"},{default:e(()=>[t(V,null,{default:e(()=>r[10]||(r[10]=[a("mdi-account-circle")])),_:1,__:[10]})]),_:1}),o("div",null,[o("div",Qe,d(((E=f.customer)==null?void 0:E.firstName)||"N/A")+" "+d(((ne=f.customer)==null?void 0:ne.lastName)||""),1),o("div",Je,d(((de=f.customer)==null?void 0:de.phone)||"No phone"),1)])])]}),"item.totalAmount":e(({item:f})=>[o("div",Ke," UGX "+d(Ae(f.totalAmount)),1)]),"item.status":e(({item:f})=>[t(ae,{color:_e(f.status),size:"small",class:"font-weight-medium"},{default:e(()=>[a(d(we(f.status)),1)]),_:2},1032,["color"])]),"item.driver":e(({item:f})=>[f.driver?(S(),Z("div",We,[t(H,{size:"24",color:"primary",class:"mr-2"},{default:e(()=>[t(V,{size:"16",color:"white"},{default:e(()=>r[11]||(r[11]=[a("mdi-account")])),_:1,__:[11]})]),_:1}),o("div",null,[o("div",Ye,d(f.driver.firstName)+" "+d(f.driver.lastName),1),o("div",Ze,d(f.driver.phone),1)])])):(S(),Z("div",He," No driver assigned "))]),"item.createdAt":e(({item:f})=>[o("div",null,[o("div",et,d(be(f.createdAt)),1),o("div",tt,d(Ve(f.createdAt)),1)])]),"item.actions":e(({item:f})=>[o("div",rt,[h(f)?(S(),O(x,{key:0,onClick:E=>T(f),size:"small",color:"primary",variant:"outlined",loading:N(n).assigningDriver},{default:e(()=>[t(V,{size:"16",class:"mr-1"},{default:e(()=>r[12]||(r[12]=[a("mdi-account-plus")])),_:1,__:[12]}),r[13]||(r[13]=a(" Assign Driver "))]),_:2,__:[13]},1032,["onClick","loading"])):$("",!0),P(f)?(S(),O(x,{key:1,onClick:E=>M(f),size:"small",color:"secondary",variant:"outlined"},{default:e(()=>[t(V,{size:"16",class:"mr-1"},{default:e(()=>r[14]||(r[14]=[a("mdi-update")])),_:1,__:[14]}),r[15]||(r[15]=a(" Update Status "))]),_:2,__:[15]},1032,["onClick"])):$("",!0),t(x,{onClick:E=>De(f),size:"small",color:"info",variant:"text"},{default:e(()=>[t(V,{size:"16"},{default:e(()=>r[16]||(r[16]=[a("mdi-eye")])),_:1,__:[16]})]),_:2},1032,["onClick"]),t(Ue,null,{activator:e(({props:E})=>[t(x,Te(E,{size:"small",variant:"text",icon:""}),{default:e(()=>[t(V,null,{default:e(()=>r[17]||(r[17]=[a("mdi-dots-vertical")])),_:1,__:[17]})]),_:2},1040)]),default:e(()=>[t(ve,{density:"compact"},{default:e(()=>[f.status==="pending"||f.status==="confirmed"?(S(),O(j,{key:0,onClick:E=>ce(f),disabled:C.value===f.id},{prepend:e(()=>[t(V,{color:"error"},{default:e(()=>r[18]||(r[18]=[a("mdi-cancel")])),_:1,__:[18]})]),default:e(()=>[t(q,null,{default:e(()=>r[19]||(r[19]=[a("Cancel Order")])),_:1,__:[19]})]),_:2},1032,["onClick","disabled"])):$("",!0),f.status==="cancelled"?(S(),O(j,{key:1,onClick:E=>ye(f),disabled:I.value===f.id},{prepend:e(()=>[t(V,{color:"error"},{default:e(()=>r[20]||(r[20]=[a("mdi-delete")])),_:1,__:[20]})]),default:e(()=>[t(q,null,{default:e(()=>r[21]||(r[21]=[a("Delete Order")])),_:1,__:[21]})]),_:2},1032,["onClick","disabled"])):$("",!0)]),_:2},1024)]),_:2},1024)])]),loading:e(()=>[t(Ie,{type:"table-tbody"})]),"no-data":e(()=>[o("div",lt,[t(V,{size:"64",color:"grey-lighten-1"},{default:e(()=>r[22]||(r[22]=[a("mdi-package-variant")])),_:1,__:[22]}),r[23]||(r[23]=o("div",{class:"text-h6 mt-4 mb-2"},"No orders found",-1)),o("div",at,d(N(n).loading?"Loading orders...":"There are no orders matching your current filters."),1)])]),_:1},8,["headers","items","loading","server-items-length","page","items-per-page"])]}),_:1}),t(Be,{modelValue:m.value,"onUpdate:modelValue":r[2]||(r[2]=_=>m.value=_),order:u.value,onDriverAssigned:F},null,8,["modelValue","order"]),t(je,{modelValue:p.value,"onUpdate:modelValue":r[3]||(r[3]=_=>p.value=_),order:u.value,onStatusUpdated:X},null,8,["modelValue","order"]),t(te,{modelValue:c.value,"onUpdate:modelValue":r[5]||(r[5]=_=>c.value=_),"max-width":"800px"},{default:e(()=>[u.value?(S(),O(W,{key:0},{default:e(()=>[t(Q,null,{default:e(()=>[a(" Order #"+d(u.value.orderNumber),1)]),_:1}),t(re,null,{default:e(()=>[t(ue,null,{default:e(()=>[t(Y,{cols:"12",md:"6"},{default:e(()=>[o("p",null,[r[24]||(r[24]=o("strong",null,"Status:",-1)),a(" "+d(u.value.status),1)]),o("p",null,[r[25]||(r[25]=o("strong",null,"Customer:",-1)),a(" "+d(u.value.customer.firstName)+" "+d(u.value.customer.lastName),1)]),o("p",null,[r[26]||(r[26]=o("strong",null,"Delivery Address:",-1)),a(" "+d(u.value.deliveryAddress),1)])]),_:1}),t(Y,{cols:"12",md:"6"},{default:e(()=>[o("p",null,[r[27]||(r[27]=o("strong",null,"Total Amount:",-1)),a(" UGX "+d(u.value.totalAmount),1)]),o("p",null,[r[28]||(r[28]=o("strong",null,"Driver:",-1)),a(" "+d(u.value.driver?`${u.value.driver.firstName} ${u.value.driver.lastName}`:"Not Assigned"),1)]),o("p",null,[r[29]||(r[29]=o("strong",null,"Order Date:",-1)),a(" "+d(new Date(u.value.createdAt).toLocaleString()),1)])]),_:1})]),_:1}),t(B,{class:"my-4"}),r[30]||(r[30]=o("h3",null,"Order Items",-1)),t(ve,null,{default:e(()=>[(S(!0),Z(Fe,null,Pe(u.value.items,_=>(S(),O(j,{key:_.id},{default:e(()=>[t(q,null,{default:e(()=>[a(d(_.gasCylinder.name),1)]),_:2},1024),t(fe,null,{default:e(()=>[a(" Quantity: "+d(_.quantity)+" | Unit Price: UGX "+d(_.unitPrice)+" | Total: UGX "+d(_.totalPrice),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1,__:[30]}),t(se,null,{default:e(()=>[t(K),t(x,{color:"primary",onClick:r[4]||(r[4]=_=>c.value=!1)},{default:e(()=>r[31]||(r[31]=[a("Close")])),_:1,__:[31]})]),_:1})]),_:1})):$("",!0)]),_:1},8,["modelValue"])]),_:1}))}}),nt=oe(st,[["__scopeId","data-v-4c7e7d37"]]);export{nt as default};
